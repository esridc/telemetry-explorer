{"version":3,"names":["CSS","button","XButton","disabled","key","label","onClick","ref","scale","h","class","tabIndex","type","icon","getIconScale","comboboxCss","isGroup","el","tagName","ComboboxItemGroup","itemUidPrefix","chipUidPrefix","labelUidPrefix","listboxUidPrefix","inputUidPrefix","Combobox","constructor","hostRef","this","placement","defaultMenuPlacement","internalValueChangeFlag","textInput","mutationObserver","createObserver","updateItems","resizeObserver","setMaxScrollerHeight","refreshSelectionDisplay","guid","inputHeight","ignoreSelectedEventsFlag","openTransitionProp","setFilteredPlacements","flipPlacements","filteredFlipPlacements","filterValidFlipPlacements","getValue","items","selectedItems","map","item","_a","value","toString","length","onLabelClick","setFocus","keyDownHandler","event","readOnly","activeChipIndex","activeItemIndex","allowCustomValues","filterText","addCustomChip","preventDefault","open","clearInputValue","filterItems","updateActiveItemIndex","selectionStart","previousChip","nextChip","filteredItems","shiftActiveItemIndex","comboboxInViewport","scrollIntoView","ensureRecentSelectedItemIsActive","defaultPrevented","scrollToActiveItem","clearDisabled","clearValue","toggleSelection","removeActiveChip","submitForm","notDeletable","selectionDisplay","selectedHiddenChipsCount","isMulti","removeLastChip","toggleCloseEnd","removeEventListener","toggleOpenEnd","async","listContainerEl","referenceEl","reposition","maxScrollerHeight","getMaxScrollerHeight","style","maxHeight","minWidth","clientWidth","calciteChipCloseHandler","comboboxItem","selection","find","calciteComboboxChipClose","emit","clickHandler","composedPath","some","node","classList","contains","XButtonCSS","componentLoaded","isSingleLike","selectionMode","allSelectedIndicatorChipEl","chipContainerEl","placeholder","selectedIndicatorChipEl","chipContainerElGap","parseInt","getComputedStyle","gap","replace","chipContainerElWidth","getElementWidth","fontSize","fontFamily","inputTextWidth","getTextWidth","inputWidth","calciteSize48","allSelectedIndicatorChipElWidth","selectedIndicatorChipElWidth","largestSelectedIndicatorChipWidth","Math","max","setCompactSelectionDisplay","chipEls","Array","from","shadowRoot","querySelectorAll","filter","chipEl","closable","availableHorizontalChipElSpace","round","refreshChipDisplay","setVisibleAndHiddenChips","setFloatingEl","floatingEl","connectFloatingUI","setContainerEl","observe","transitionEl","setChipContainerEl","setReferenceEl","setAllSelectedIndicatorChipEl","setSelectedIndicatorChipEl","inputHandler","target","filteredData","textLabel","debounce","text","setOpenToEmptyState","data","itemsAndGroups","getItemsAndGroups","matchAll","forEach","hidden","parent","grandparent","ancestors","ancestor","filterTextMatchPattern","RegExp","escapeRegExp","getFilteredItems","trim","calciteComboboxFilterChange","internalComboboxChangeEvent","calciteComboboxChange","emitComboboxChange","getSelectedItems","match","selected","hasActiveChildren","sort","a","b","aIdx","indexOf","bIdx","getItems","groupItems","getGroupItems","getData","needsIcon","getNeedsIcon","groupItem","index","afterEmptyGroup","nextGroupItem","children","activeItem","height","calculateSingleItemHeight","offsetHeight","scrollTop","offsetTop","comboboxFocusHandler","focus","form","undefined","placeholderIcon","placeholderIconFlipRtl","maxItems","validationMessage","validationIcon","validity","valid","badInput","customError","patternMismatch","rangeOverflow","rangeUnderflow","stepMismatch","tooLong","tooShort","typeMismatch","valueMissing","name","overlayPositioning","required","status","messages","messageOverrides","activeDescendant","compactSelectionDisplay","selectedVisibleChipsCount","effectiveLocale","defaultMessages","filterTextChange","openHandler","onToggleOpenCloseComponent","handleDisabledChange","maxItemsHandler","overlayPositioningHandler","handlePropsChange","valueHandler","isArray","includes","onMessagesChange","flipPlacementsHandler","selectedItemsHandler","componentOnReady","calciteComboboxItemChangeHandler","newIndex","delayed","componentFocusable","connectedCallback","connectInteractive","connectLocalized","connectMessages","connectLabel","connectForm","childList","subtree","setUpLoadableComponent","setUpMessages","componentDidLoad","afterConnectDefaultValueSet","setComponentLoaded","componentDidRender","updateHostInteraction","componentDidUpdate","disconnectedCallback","disconnect","_b","disconnectInteractive","disconnectLabel","disconnectForm","disconnectFloatingUI","disconnectLocalized","disconnectMessages","effectiveLocaleChange","updateMessages","resetText","bounding","getBoundingClientRect","top","left","right","window","innerWidth","document","documentElement","bottom","innerHeight","clientHeight","onBeforeOpen","calciteComboboxBeforeOpen","onOpen","calciteComboboxOpen","onBeforeClose","calciteComboboxBeforeClose","onClose","calciteComboboxClose","targetIndex","hideChip","add","chipInvisible","showChip","remove","chipElWidth","newCompactBreakpoint","maxCompactBreakpoint","newSelectedVisibleChipsCount","newSelectedHiddenChipsCount","itemsToProcess","ComboboxChildSelector","child","updateAncestors","getItemAncestors","getItemChildren","filterDisabled","ComboboxItem","existingItem","createElement","appendChild","active","focusChip","last","chip","querySelector","delta","i","isAllSelected","renderChips","chipClasses","reverse","pathLabel","join","appearance","iconFlipRtl","id","dismissLabel","removeTag","onCalciteChipClose","onFocusin","tabindex","title","renderAllSelectedIndicatorChip","allSelected","renderAllSelectedIndicatorChipCompact","all","renderSelectedIndicatorChip","selectedItemsCount","renderSelectedIndicatorChipCompact","showingInlineIcon","selectedItem","selectedIcon","singleSelectionMode","renderInput","single","showLabel","toAriaBoolean","getLabelText","input","onFocus","onInput","role","renderListBoxOptions","renderFloatingUIContainer","classes","listContainer","FloatingCSS","animation","animationActive","list","renderSelectedOrPlaceholderIcon","flipRtl","renderChevronIcon","render","allSelectionDisplay","singleSelectionDisplay","fitSelectionDisplay","isClearable","Host","InteractiveContainer","wrapper","onKeyDown","selectionDisplayFit","selectionDisplaySingle","htmlFor","clear","HiddenFormInputSlot","component","Validation","message","assetsDirs"],"sources":["./node_modules/@esri/calcite-components/dist/collection/components/functional/XButton.js","./node_modules/@esri/calcite-components/dist/collection/components/combobox/combobox.css?tag=calcite-combobox&encapsulation=shadow","./node_modules/@esri/calcite-components/dist/collection/components/combobox/combobox.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.10.1\n */\nimport { h } from \"@stencil/core\";\nimport { getIconScale } from \"../../utils/component\";\nexport const CSS = {\n    button: \"x-button\",\n};\nexport function XButton({ disabled, key, label, onClick, ref, scale, }) {\n    return (h(\"button\", { \"aria-label\": label, class: CSS.button, disabled: disabled, key: key, onClick: onClick, ref: ref, tabIndex: -1, type: \"button\" }, h(\"calcite-icon\", { icon: \"x\", scale: getIconScale(scale) })));\n}\n//# sourceMappingURL=XButton.js.map\n","/**\n * Do not edit directly\n * Generated on Thu, 27 Jun 2024 13:17:24 GMT\n */\n/**\n * Do not edit directly\n * Generated on Thu, 27 Jun 2024 13:17:24 GMT\n */\n/**\n * Do not edit directly\n * Generated on Thu, 27 Jun 2024 13:17:24 GMT\n */\n/**\n * Do not edit directly\n * Generated on Thu, 27 Jun 2024 13:17:24 GMT\n */\n/**\n * Do not edit directly\n * Generated on Thu, 27 Jun 2024 13:17:22 GMT\n */\n/* mixins & extensions */\n/* helper to properly scale internal durations */\n/**\n* Currently only used in Checkbox.\n*/\n:host([disabled]) {\n  cursor: default;\n  -webkit-user-select: none;\n          user-select: none;\n  opacity: var(--calcite-opacity-disabled);\n}\n\n:host([disabled]) *,\n:host([disabled]) ::slotted(*) {\n  pointer-events: none;\n}\n\n/**\n* CSS Custom Properties\n*\n* These properties can be overridden using the component's tag as selector.\n*\n* @prop --calcite-combobox-input-height: Specifies the height of the component's input.\n*/\n:host {\n  position: relative;\n  display: block;\n}\n\n:host([disabled]) ::slotted([calcite-hydrated][disabled]),\n:host([disabled]) [calcite-hydrated][disabled] {\n  /* prevent opacity stacking */\n  opacity: 1;\n}\n\n.interaction-container {\n  display: contents;\n}\n\n:host([scale=s]) .x-button {\n  inline-size: 1rem;\n  block-size: 1rem;\n}\n\n:host([scale=m]) .x-button {\n  inline-size: 1.5rem;\n  block-size: 1.5rem;\n}\n\n:host([scale=l]) .x-button {\n  inline-size: 2rem;\n  block-size: 2rem;\n}\n\n.x-button {\n  margin: 0px;\n  display: flex;\n  cursor: pointer;\n  appearance: none;\n  align-content: center;\n  align-items: center;\n  justify-content: center;\n  align-self: center;\n  border-width: 2px;\n  background-color: transparent;\n  color: var(--calcite-color-text-3);\n  outline-color: transparent;\n  transition: background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;\n  border-radius: 50%;\n  border-color: transparent;\n  background-color: var(--calcite-color-foreground-2);\n}\n.x-button:active, .x-button:hover {\n  color: var(--calcite-color-text-1);\n  background-color: var(--calcite-color-foreground-3);\n}\n.x-button:active {\n  border-style: solid;\n  border-color: var(--calcite-color-brand);\n}\n.x-button calcite-icon {\n  color: inherit;\n}\n\n:host([scale=s]) {\n  font-size: var(--calcite-font-size--2);\n  --calcite-combobox-item-spacing-unit-l: 0.5rem;\n  --calcite-combobox-item-spacing-unit-s: 0.25rem;\n  --calcite-combobox-input-height: 1rem;\n  --calcite-internal-combobox-input-margin-block: calc(0.25rem - 1px);\n}\n:host([scale=s]) .x-button {\n  margin-inline: 0.5rem;\n}\n\n:host([scale=m]) {\n  font-size: var(--calcite-font-size--1);\n  --calcite-combobox-item-spacing-unit-l: 0.75rem;\n  --calcite-combobox-item-spacing-unit-s: 0.5rem;\n  --calcite-combobox-input-height: 1rem;\n  --calcite-internal-combobox-input-margin-block: calc(0.5rem - 1px);\n}\n:host([scale=m]) .x-button {\n  margin-inline-end: 0.75rem;\n}\n\n:host([scale=l]) {\n  font-size: var(--calcite-font-size-0);\n  --calcite-combobox-item-spacing-unit-l: 1rem;\n  --calcite-combobox-item-spacing-unit-s: 0.75rem;\n  --calcite-combobox-input-height: 1.5rem;\n  --calcite-internal-combobox-input-margin-block: calc(0.625rem - 1px);\n}\n:host([scale=l]) .x-button {\n  margin-inline-end: 1rem;\n}\n\n.wrapper {\n  display: flex;\n  border-width: 1px;\n  border-style: solid;\n  border-color: var(--calcite-color-border-input);\n  background-color: var(--calcite-color-foreground-1);\n  color: var(--calcite-color-text-1);\n  outline-color: transparent;\n  padding-block: calc(var(--calcite-combobox-item-spacing-unit-s) / 4);\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n.wrapper:hover .icon {\n  color: var(--calcite-color-text-1);\n}\n\n:host(:focus-within) .wrapper,\n.wrapper--active {\n  outline: 2px solid var(--calcite-ui-focus-color, var(--calcite-color-brand));\n  outline-offset: calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          );\n}\n\n:host([read-only]) .wrapper {\n  background-color: var(--calcite-color-background);\n}\n:host([read-only]) .label {\n  font-weight: var(--calcite-font-weight-medium);\n}\n\n:host([status=invalid]) .wrapper {\n  border-color: var(--calcite-color-status-danger);\n}\n\n:host([status=invalid]:focus-within) .wrapper {\n  outline: 2px solid var(--calcite-color-status-danger);\n  outline-offset: calc(\n            -2px *\n            calc(\n              1 -\n              2 * clamp(\n                0,\n                var(--calcite-offset-invert-focus),\n                1\n              )\n            )\n          );\n}\n\n.wrapper--single {\n  padding-block: 0;\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n  cursor: pointer;\n  flex-wrap: nowrap;\n}\n\n.grid-input {\n  position: relative;\n  display: flex;\n  flex-grow: 1;\n  flex-wrap: wrap;\n  align-items: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 0px;\n  gap: var(--calcite-combobox-item-spacing-unit-s);\n  margin-inline-end: var(--calcite-combobox-item-spacing-unit-s);\n}\n.grid-input.selection-display-fit, .grid-input.selection-display-single {\n  flex-wrap: nowrap;\n  overflow: hidden;\n}\n\n.input {\n  flex-grow: 1;\n  appearance: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  border-style: none;\n  background-color: transparent;\n  padding: 0px;\n  font-family: inherit;\n  color: var(--calcite-color-text-1);\n  font-size: inherit;\n  block-size: var(--calcite-combobox-input-height);\n  line-height: var(--calcite-combobox-input-height);\n  inline-size: 100%;\n  margin-block-end: var(--calcite-combobox-item-spacing-unit-s);\n  min-inline-size: 4.8125rem;\n}\n.input:focus {\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n.input:placeholder-shown {\n  text-overflow: ellipsis;\n}\n\n.input--single {\n  padding: 0px;\n  margin-block: var(--calcite-internal-combobox-input-margin-block);\n}\n\n.wrapper--active .input-single {\n  cursor: text;\n}\n\n.input--hidden {\n  pointer-events: none;\n  inline-size: 0px;\n  min-inline-size: 0px;\n  opacity: 0;\n}\n\n.input--icon {\n  padding-block: 0;\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n.input-wrap {\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n}\n\n.input-wrap--single {\n  flex: 1 1 0%;\n  overflow: hidden;\n}\n\n.label {\n  pointer-events: none;\n  max-inline-size: 100%;\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 0px;\n  font-weight: var(--calcite-font-weight-normal);\n  block-size: var(--calcite-combobox-input-height);\n  line-height: var(--calcite-combobox-input-height);\n}\n\n.label--icon {\n  padding-inline: var(--calcite-combobox-item-spacing-unit-l);\n}\n\n.icon-end,\n.icon-start {\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n}\n\n.icon-end {\n  flex: none;\n}\n.icon-end .icon {\n  color: var(--calcite-color-text-3);\n}\n\n.floating-ui-container {\n  --calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);\n  display: block;\n  position: absolute;\n  z-index: var(--calcite-floating-ui-z-index);\n  visibility: hidden;\n}\n\n.floating-ui-container .calcite-floating-ui-anim {\n  position: relative;\n  transition: var(--calcite-floating-ui-transition);\n  transition-property: transform, visibility, opacity;\n  opacity: 0;\n  box-shadow: 0 0 16px 0 rgba(0, 0, 0, 0.16);\n  z-index: var(--calcite-z-index);\n  border-radius: 0.25rem;\n}\n.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim {\n  transform: translateY(-5px);\n}\n.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim {\n  transform: translateY(5px);\n}\n.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim {\n  transform: translateX(5px);\n}\n.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim {\n  transform: translateX(-5px);\n}\n.floating-ui-container[data-placement] .calcite-floating-ui-anim--active {\n  opacity: 1;\n  transform: translate(0);\n}\n\n.floating-ui-container--active {\n  visibility: visible;\n}\n\n@media (forced-colors: active) {\n  .wrapper,\n  .floating-ui-container--active {\n    border: 1px solid canvasText;\n  }\n}\n.screen-readers-only {\n  position: absolute;\n  inline-size: 1px;\n  block-size: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.list-container {\n  max-block-size: 45vh;\n  overflow-y: auto;\n  background-color: var(--calcite-color-foreground-1);\n  inline-size: var(--calcite-dropdown-width);\n}\n\n.list {\n  margin: 0px;\n  display: block;\n  padding: 0px;\n}\n\n.list--hide {\n  block-size: 0px;\n  overflow: hidden;\n}\n\ncalcite-chip {\n  --calcite-animation-timing: 0;\n}\n\n.chip {\n  margin-block: calc(var(--calcite-combobox-item-spacing-unit-s) / 4);\n  max-inline-size: 100%;\n}\n\n.chip--active {\n  background-color: var(--calcite-color-foreground-3);\n}\n\n.chip--invisible {\n  visibility: hidden;\n  position: absolute;\n}\n\n.item {\n  display: block;\n}\n\n.validation-container {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  align-self: stretch;\n}\n\n:host([scale=m]) .validation-container,\n:host([scale=l]) .validation-container {\n  padding-block-start: 0.5rem;\n}\n\n:host([scale=s]) .validation-container {\n  padding-block-start: 0.25rem;\n}\n\n::slotted(input[slot=hidden-form-input]) {\n  margin: 0 !important;\n  opacity: 0 !important;\n  outline: none !important;\n  padding: 0 !important;\n  position: absolute !important;\n  inset: 0 !important;\n  transform: none !important;\n  -webkit-appearance: none !important;\n  z-index: -1 !important;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n[hidden] {\n  display: none;\n}\n\n::slotted(calcite-combobox-item-group:not(:first-child)) {\n  padding-block-start: var(--calcite-combobox-item-spacing-unit-l);\n}","/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.10.1\n */\nimport { h, Host, } from \"@stencil/core\";\nimport { debounce, escapeRegExp } from \"lodash-es\";\nimport { calciteSize48 } from \"@esri/calcite-design-tokens/dist/es6/core.js\";\nimport { filter } from \"../../utils/filter\";\nimport { getElementWidth, getTextWidth, toAriaBoolean } from \"../../utils/dom\";\nimport { connectFloatingUI, defaultMenuPlacement, disconnectFloatingUI, filterValidFlipPlacements, FloatingCSS, reposition, } from \"../../utils/floating-ui\";\nimport { afterConnectDefaultValueSet, connectForm, disconnectForm, HiddenFormInputSlot, submitForm, } from \"../../utils/form\";\nimport { guid } from \"../../utils/guid\";\nimport { connectInteractive, disconnectInteractive, InteractiveContainer, updateHostInteraction, } from \"../../utils/interactive\";\nimport { connectLabel, disconnectLabel, getLabelText } from \"../../utils/label\";\nimport { componentFocusable, componentLoaded, setComponentLoaded, setUpLoadableComponent, } from \"../../utils/loadable\";\nimport { connectLocalized, disconnectLocalized } from \"../../utils/locale\";\nimport { createObserver } from \"../../utils/observers\";\nimport { onToggleOpenCloseComponent } from \"../../utils/openCloseComponent\";\nimport { connectMessages, disconnectMessages, setUpMessages, updateMessages, } from \"../../utils/t9n\";\nimport { CSS as XButtonCSS, XButton } from \"../functional/XButton\";\nimport { componentOnReady, getIconScale } from \"../../utils/component\";\nimport { Validation } from \"../functional/Validation\";\nimport { ComboboxChildSelector, ComboboxItem, ComboboxItemGroup, CSS } from \"./resources\";\nimport { getItemAncestors, getItemChildren, hasActiveChildren, isSingleLike } from \"./utils\";\nconst isGroup = (el) => el.tagName === ComboboxItemGroup;\nconst itemUidPrefix = \"combobox-item-\";\nconst chipUidPrefix = \"combobox-chip-\";\nconst labelUidPrefix = \"combobox-label-\";\nconst listboxUidPrefix = \"combobox-listbox-\";\nconst inputUidPrefix = \"combobox-input-\";\n/**\n * @slot - A slot for adding `calcite-combobox-item`s.\n */\nexport class Combobox {\n    constructor() {\n        this.placement = defaultMenuPlacement;\n        this.internalValueChangeFlag = false;\n        this.textInput = null;\n        this.mutationObserver = createObserver(\"mutation\", () => this.updateItems());\n        this.resizeObserver = createObserver(\"resize\", () => {\n            this.setMaxScrollerHeight();\n            this.refreshSelectionDisplay();\n        });\n        this.guid = guid();\n        this.inputHeight = 0;\n        this.ignoreSelectedEventsFlag = false;\n        this.openTransitionProp = \"opacity\";\n        this.setFilteredPlacements = () => {\n            const { el, flipPlacements } = this;\n            this.filteredFlipPlacements = flipPlacements\n                ? filterValidFlipPlacements(flipPlacements, el)\n                : null;\n        };\n        this.getValue = () => {\n            const items = this.selectedItems.map((item) => item?.value?.toString());\n            return items?.length ? (items.length > 1 ? items : items[0]) : \"\";\n        };\n        this.onLabelClick = () => {\n            this.setFocus();\n        };\n        this.keyDownHandler = (event) => {\n            if (this.readOnly) {\n                return;\n            }\n            const { key } = event;\n            switch (key) {\n                case \"Tab\":\n                    this.activeChipIndex = -1;\n                    this.activeItemIndex = -1;\n                    if (this.allowCustomValues && this.filterText) {\n                        this.addCustomChip(this.filterText, true);\n                        event.preventDefault();\n                    }\n                    else if (this.open) {\n                        this.open = false;\n                        event.preventDefault();\n                    }\n                    else if (!this.allowCustomValues && this.filterText) {\n                        this.clearInputValue();\n                        this.filterItems(\"\");\n                        this.updateActiveItemIndex(-1);\n                    }\n                    break;\n                case \"ArrowLeft\":\n                    if (this.activeChipIndex !== -1 || this.textInput.selectionStart === 0) {\n                        this.previousChip();\n                        event.preventDefault();\n                    }\n                    break;\n                case \"ArrowRight\":\n                    if (this.activeChipIndex !== -1) {\n                        this.nextChip();\n                        event.preventDefault();\n                    }\n                    break;\n                case \"ArrowUp\":\n                    if (this.filteredItems.length) {\n                        event.preventDefault();\n                        if (this.open) {\n                            this.shiftActiveItemIndex(-1);\n                        }\n                        if (!this.comboboxInViewport()) {\n                            this.el.scrollIntoView();\n                        }\n                    }\n                    break;\n                case \"ArrowDown\":\n                    if (this.filteredItems.length) {\n                        event.preventDefault();\n                        if (this.open) {\n                            this.shiftActiveItemIndex(1);\n                        }\n                        else {\n                            this.open = true;\n                            this.ensureRecentSelectedItemIsActive();\n                        }\n                        if (!this.comboboxInViewport()) {\n                            this.el.scrollIntoView();\n                        }\n                    }\n                    break;\n                case \" \":\n                    if (!this.textInput.value && !event.defaultPrevented) {\n                        if (!this.open) {\n                            this.open = true;\n                            this.shiftActiveItemIndex(1);\n                        }\n                        event.preventDefault();\n                    }\n                    break;\n                case \"Home\":\n                    if (!this.open) {\n                        return;\n                    }\n                    event.preventDefault();\n                    this.updateActiveItemIndex(0);\n                    this.scrollToActiveItem();\n                    if (!this.comboboxInViewport()) {\n                        this.el.scrollIntoView();\n                    }\n                    break;\n                case \"End\":\n                    if (!this.open) {\n                        return;\n                    }\n                    event.preventDefault();\n                    this.updateActiveItemIndex(this.filteredItems.length - 1);\n                    this.scrollToActiveItem();\n                    if (!this.comboboxInViewport()) {\n                        this.el.scrollIntoView();\n                    }\n                    break;\n                case \"Escape\":\n                    if (!this.clearDisabled && !this.open) {\n                        this.clearValue();\n                    }\n                    this.open = false;\n                    event.preventDefault();\n                    break;\n                case \"Enter\":\n                    if (this.open && this.activeItemIndex > -1) {\n                        this.toggleSelection(this.filteredItems[this.activeItemIndex]);\n                        event.preventDefault();\n                    }\n                    else if (this.activeChipIndex > -1) {\n                        this.removeActiveChip();\n                        event.preventDefault();\n                    }\n                    else if (this.allowCustomValues && this.filterText) {\n                        this.addCustomChip(this.filterText, true);\n                        event.preventDefault();\n                    }\n                    else if (!event.defaultPrevented) {\n                        if (submitForm(this)) {\n                            event.preventDefault();\n                        }\n                    }\n                    break;\n                case \"Delete\":\n                case \"Backspace\": {\n                    const notDeletable = this.selectionDisplay === \"single\" ||\n                        (this.selectionDisplay === \"fit\" && this.selectedHiddenChipsCount > 0);\n                    if (notDeletable) {\n                        return;\n                    }\n                    if (this.activeChipIndex > -1) {\n                        event.preventDefault();\n                        this.removeActiveChip();\n                    }\n                    else if (!this.filterText && this.isMulti()) {\n                        event.preventDefault();\n                        this.removeLastChip();\n                    }\n                    break;\n                }\n            }\n        };\n        this.toggleCloseEnd = () => {\n            this.open = false;\n            this.el.removeEventListener(\"calciteComboboxClose\", this.toggleCloseEnd);\n        };\n        this.toggleOpenEnd = () => {\n            this.open = false;\n            this.el.removeEventListener(\"calciteComboboxOpen\", this.toggleOpenEnd);\n        };\n        this.setMaxScrollerHeight = async () => {\n            const { listContainerEl, open, referenceEl } = this;\n            if (!listContainerEl || !open) {\n                return;\n            }\n            await this.reposition(true);\n            const maxScrollerHeight = this.getMaxScrollerHeight();\n            listContainerEl.style.maxHeight = maxScrollerHeight > 0 ? `${maxScrollerHeight}px` : \"\";\n            listContainerEl.style.minWidth = `${referenceEl.clientWidth}px`;\n            await this.reposition(true);\n        };\n        this.calciteChipCloseHandler = (comboboxItem) => {\n            this.open = false;\n            const selection = this.items.find((item) => item === comboboxItem);\n            if (selection) {\n                this.toggleSelection(selection, false);\n            }\n            this.calciteComboboxChipClose.emit();\n        };\n        this.clickHandler = (event) => {\n            if (this.readOnly) {\n                return;\n            }\n            const composedPath = event.composedPath();\n            if (composedPath.some((node) => node.tagName === \"CALCITE-CHIP\")) {\n                this.open = false;\n                event.preventDefault();\n                return;\n            }\n            if (composedPath.some((node) => node.classList?.contains(XButtonCSS.button))) {\n                this.clearValue();\n                event.preventDefault();\n                return;\n            }\n            this.open = !this.open;\n            this.ensureRecentSelectedItemIsActive();\n        };\n        this.refreshSelectionDisplay = async () => {\n            await componentLoaded(this);\n            if (isSingleLike(this.selectionMode)) {\n                return;\n            }\n            if (!this.textInput) {\n                return;\n            }\n            const { allSelectedIndicatorChipEl, chipContainerEl, selectionDisplay, placeholder, selectedIndicatorChipEl, textInput, } = this;\n            const chipContainerElGap = parseInt(getComputedStyle(chipContainerEl).gap.replace(\"px\", \"\"));\n            const chipContainerElWidth = getElementWidth(chipContainerEl);\n            const { fontSize, fontFamily } = getComputedStyle(textInput);\n            const inputTextWidth = getTextWidth(placeholder, `${fontSize} ${fontFamily}`);\n            const inputWidth = (inputTextWidth || parseInt(calciteSize48)) + chipContainerElGap;\n            const allSelectedIndicatorChipElWidth = getElementWidth(allSelectedIndicatorChipEl);\n            const selectedIndicatorChipElWidth = getElementWidth(selectedIndicatorChipEl);\n            const largestSelectedIndicatorChipWidth = Math.max(allSelectedIndicatorChipElWidth, selectedIndicatorChipElWidth);\n            this.setCompactSelectionDisplay({\n                chipContainerElGap,\n                chipContainerElWidth,\n                inputWidth,\n                largestSelectedIndicatorChipWidth,\n            });\n            if (selectionDisplay === \"fit\") {\n                const chipEls = Array.from(this.el.shadowRoot.querySelectorAll(\"calcite-chip\")).filter((chipEl) => chipEl.closable);\n                const availableHorizontalChipElSpace = Math.round(chipContainerElWidth -\n                    ((this.selectedHiddenChipsCount > 0 ? selectedIndicatorChipElWidth : 0) +\n                        chipContainerElGap +\n                        inputWidth +\n                        chipContainerElGap));\n                this.refreshChipDisplay({ availableHorizontalChipElSpace, chipContainerElGap, chipEls });\n                this.setVisibleAndHiddenChips(chipEls);\n            }\n        };\n        this.setFloatingEl = (el) => {\n            this.floatingEl = el;\n            connectFloatingUI(this, this.referenceEl, this.floatingEl);\n        };\n        this.setContainerEl = (el) => {\n            this.resizeObserver.observe(el);\n            this.listContainerEl = el;\n            this.transitionEl = el;\n        };\n        this.setChipContainerEl = (el) => {\n            this.resizeObserver.observe(el);\n            this.chipContainerEl = el;\n        };\n        this.setReferenceEl = (el) => {\n            this.referenceEl = el;\n            connectFloatingUI(this, this.referenceEl, this.floatingEl);\n        };\n        this.setAllSelectedIndicatorChipEl = (el) => {\n            this.allSelectedIndicatorChipEl = el;\n        };\n        this.setSelectedIndicatorChipEl = (el) => {\n            this.selectedIndicatorChipEl = el;\n        };\n        this.inputHandler = (event) => {\n            const value = event.target.value;\n            this.filterText = value;\n        };\n        this.filterItems = (() => {\n            const find = (item, filteredData) => item &&\n                filteredData.some(({ label, value }) => isGroup(item) ? label === item.label : value === item.value && label === item.textLabel);\n            return debounce((text, setOpenToEmptyState = false, emit = true) => {\n                const filteredData = filter(this.data, text);\n                const itemsAndGroups = this.getItemsAndGroups();\n                const matchAll = text === \"\";\n                itemsAndGroups.forEach((item) => {\n                    if (matchAll) {\n                        item.hidden = false;\n                        return;\n                    }\n                    const hidden = !find(item, filteredData);\n                    item.hidden = hidden;\n                    const [parent, grandparent] = item.ancestors;\n                    if (find(parent, filteredData) || find(grandparent, filteredData)) {\n                        item.hidden = false;\n                    }\n                    if (!hidden) {\n                        item.ancestors.forEach((ancestor) => (ancestor.hidden = false));\n                    }\n                });\n                this.filterTextMatchPattern =\n                    this.filterText && new RegExp(`(${escapeRegExp(this.filterText)})`, \"i\");\n                this.filteredItems = this.getFilteredItems();\n                this.filteredItems.forEach((item) => {\n                    item.filterTextMatchPattern = this.filterTextMatchPattern;\n                });\n                if (setOpenToEmptyState) {\n                    this.open = this.filterText.trim().length > 0 && this.filteredItems.length > 0;\n                }\n                if (emit) {\n                    this.calciteComboboxFilterChange.emit();\n                }\n            }, 100);\n        })();\n        this.internalComboboxChangeEvent = () => {\n            this.calciteComboboxChange.emit();\n        };\n        this.emitComboboxChange = debounce(this.internalComboboxChangeEvent, 0);\n        this.getSelectedItems = () => {\n            if (!this.isMulti()) {\n                const match = this.items.find(({ selected }) => selected);\n                return match ? [match] : [];\n            }\n            return (this.items\n                .filter((item) => item.selected && (this.selectionMode !== \"ancestors\" || !hasActiveChildren(item)))\n                /** Preserve order of entered tags */\n                .sort((a, b) => {\n                const aIdx = this.selectedItems.indexOf(a);\n                const bIdx = this.selectedItems.indexOf(b);\n                if (aIdx > -1 && bIdx > -1) {\n                    return aIdx - bIdx;\n                }\n                return bIdx - aIdx;\n            }));\n        };\n        this.updateItems = () => {\n            this.items = this.getItems();\n            this.groupItems = this.getGroupItems();\n            this.data = this.getData();\n            this.selectedItems = this.getSelectedItems();\n            this.filteredItems = this.getFilteredItems();\n            this.needsIcon = this.getNeedsIcon();\n            this.items.forEach((item) => {\n                item.selectionMode = this.selectionMode;\n                item.scale = this.scale;\n            });\n            if (!this.allowCustomValues) {\n                this.setMaxScrollerHeight();\n            }\n            this.groupItems.forEach((groupItem, index, items) => {\n                if (index === 0) {\n                    groupItem.afterEmptyGroup = false;\n                }\n                const nextGroupItem = items[index + 1];\n                if (nextGroupItem) {\n                    nextGroupItem.afterEmptyGroup = groupItem.children.length === 0;\n                }\n            });\n        };\n        this.scrollToActiveItem = () => {\n            const activeItem = this.filteredItems[this.activeItemIndex];\n            if (!activeItem) {\n                return;\n            }\n            const height = this.calculateSingleItemHeight(activeItem);\n            const { offsetHeight, scrollTop } = this.listContainerEl;\n            if (offsetHeight + scrollTop < activeItem.offsetTop + height) {\n                this.listContainerEl.scrollTop = activeItem.offsetTop - offsetHeight + height;\n            }\n            else if (activeItem.offsetTop < scrollTop) {\n                this.listContainerEl.scrollTop = activeItem.offsetTop;\n            }\n        };\n        this.comboboxFocusHandler = () => {\n            if (this.disabled) {\n                return;\n            }\n            this.textInput?.focus();\n        };\n        this.clearDisabled = false;\n        this.filterText = \"\";\n        this.selectionDisplay = \"all\";\n        this.open = false;\n        this.disabled = false;\n        this.form = undefined;\n        this.label = undefined;\n        this.placeholder = undefined;\n        this.placeholderIcon = undefined;\n        this.placeholderIconFlipRtl = false;\n        this.maxItems = 0;\n        this.validationMessage = undefined;\n        this.validationIcon = undefined;\n        this.validity = {\n            valid: false,\n            badInput: false,\n            customError: false,\n            patternMismatch: false,\n            rangeOverflow: false,\n            rangeUnderflow: false,\n            stepMismatch: false,\n            tooLong: false,\n            tooShort: false,\n            typeMismatch: false,\n            valueMissing: false,\n        };\n        this.name = undefined;\n        this.allowCustomValues = undefined;\n        this.overlayPositioning = \"absolute\";\n        this.required = false;\n        this.selectionMode = \"multiple\";\n        this.scale = \"m\";\n        this.status = \"idle\";\n        this.value = null;\n        this.flipPlacements = undefined;\n        this.messages = undefined;\n        this.messageOverrides = undefined;\n        this.selectedItems = [];\n        this.filteredItems = [];\n        this.readOnly = false;\n        this.items = [];\n        this.groupItems = [];\n        this.needsIcon = undefined;\n        this.activeItemIndex = -1;\n        this.activeChipIndex = -1;\n        this.activeDescendant = \"\";\n        this.compactSelectionDisplay = false;\n        this.selectedHiddenChipsCount = 0;\n        this.selectedVisibleChipsCount = 0;\n        this.effectiveLocale = undefined;\n        this.defaultMessages = undefined;\n    }\n    filterTextChange(value) {\n        this.updateActiveItemIndex(-1);\n        this.filterItems(value, true);\n    }\n    openHandler() {\n        onToggleOpenCloseComponent(this);\n        if (this.disabled) {\n            this.open = false;\n            return;\n        }\n        this.setMaxScrollerHeight();\n    }\n    handleDisabledChange(value) {\n        if (!value) {\n            this.open = false;\n        }\n    }\n    maxItemsHandler() {\n        this.setMaxScrollerHeight();\n    }\n    overlayPositioningHandler() {\n        this.reposition(true);\n    }\n    handlePropsChange() {\n        this.updateItems();\n    }\n    valueHandler(value) {\n        if (!this.internalValueChangeFlag) {\n            const items = this.getItems();\n            if (Array.isArray(value)) {\n                items.forEach((item) => (item.selected = value.includes(item.value)));\n            }\n            else if (value) {\n                items.forEach((item) => (item.selected = value === item.value));\n            }\n            else {\n                items.forEach((item) => (item.selected = false));\n            }\n            this.updateItems();\n        }\n    }\n    onMessagesChange() {\n        /*  wired up by t9n util */\n    }\n    flipPlacementsHandler() {\n        this.setFilteredPlacements();\n        this.reposition(true);\n    }\n    selectedItemsHandler() {\n        this.internalValueChangeFlag = true;\n        this.value = this.getValue();\n        this.internalValueChangeFlag = false;\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Event Listeners\n    //\n    //--------------------------------------------------------------------------\n    async documentClickHandler(event) {\n        if (this.disabled || event.composedPath().includes(this.el)) {\n            return;\n        }\n        await componentOnReady(this.el);\n        if (!this.allowCustomValues && this.filterText) {\n            this.clearInputValue();\n            this.filterItems(\"\");\n            this.updateActiveItemIndex(-1);\n        }\n        if (this.allowCustomValues && this.filterText.trim().length) {\n            this.addCustomChip(this.filterText);\n        }\n        this.open = false;\n    }\n    calciteComboboxItemChangeHandler(event) {\n        if (this.ignoreSelectedEventsFlag) {\n            return;\n        }\n        const target = event.target;\n        const newIndex = this.filteredItems.indexOf(target);\n        this.updateActiveItemIndex(newIndex);\n        this.toggleSelection(target, target.selected);\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Public Methods\n    //\n    //--------------------------------------------------------------------------\n    /**\n     * Updates the position of the component.\n     *\n     * @param delayed Reposition the component after a delay\n     * @returns Promise\n     */\n    async reposition(delayed = false) {\n        const { floatingEl, referenceEl, placement, overlayPositioning, filteredFlipPlacements } = this;\n        return reposition(this, {\n            floatingEl,\n            referenceEl,\n            overlayPositioning,\n            placement,\n            flipPlacements: filteredFlipPlacements,\n            type: \"menu\",\n        }, delayed);\n    }\n    /** Sets focus on the component. */\n    async setFocus() {\n        await componentFocusable(this);\n        this.textInput?.focus();\n        this.activeChipIndex = -1;\n        this.activeItemIndex = -1;\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Lifecycle\n    //\n    // --------------------------------------------------------------------------\n    connectedCallback() {\n        connectInteractive(this);\n        connectLocalized(this);\n        connectMessages(this);\n        connectLabel(this);\n        connectForm(this);\n        this.internalValueChangeFlag = true;\n        this.value = this.getValue();\n        this.internalValueChangeFlag = false;\n        this.mutationObserver?.observe(this.el, { childList: true, subtree: true });\n        this.updateItems();\n        this.setFilteredPlacements();\n        if (this.open) {\n            this.openHandler();\n            onToggleOpenCloseComponent(this);\n        }\n        connectFloatingUI(this, this.referenceEl, this.floatingEl);\n    }\n    async componentWillLoad() {\n        setUpLoadableComponent(this);\n        this.updateItems();\n        await setUpMessages(this);\n        this.filterItems(this.filterText, false, false);\n    }\n    componentDidLoad() {\n        afterConnectDefaultValueSet(this, this.getValue());\n        connectFloatingUI(this, this.referenceEl, this.floatingEl);\n        setComponentLoaded(this);\n    }\n    componentDidRender() {\n        if (this.el.offsetHeight !== this.inputHeight) {\n            this.reposition(true);\n            this.inputHeight = this.el.offsetHeight;\n        }\n        updateHostInteraction(this);\n    }\n    componentDidUpdate() {\n        this.refreshSelectionDisplay();\n    }\n    disconnectedCallback() {\n        this.mutationObserver?.disconnect();\n        this.resizeObserver?.disconnect();\n        disconnectInteractive(this);\n        disconnectLabel(this);\n        disconnectForm(this);\n        disconnectFloatingUI(this, this.referenceEl, this.floatingEl);\n        disconnectLocalized(this);\n        disconnectMessages(this);\n    }\n    effectiveLocaleChange() {\n        updateMessages(this, this.effectiveLocale);\n    }\n    // --------------------------------------------------------------------------\n    //\n    //  Private Methods\n    //\n    // --------------------------------------------------------------------------\n    clearValue() {\n        this.ignoreSelectedEventsFlag = true;\n        this.items.forEach((el) => (el.selected = false));\n        this.ignoreSelectedEventsFlag = false;\n        this.selectedItems = [];\n        this.emitComboboxChange();\n        this.open = false;\n        this.updateActiveItemIndex(-1);\n        this.resetText();\n        this.filterItems(\"\");\n        this.setFocus();\n    }\n    clearInputValue() {\n        this.textInput.value = \"\";\n        this.filterText = \"\";\n    }\n    comboboxInViewport() {\n        const bounding = this.el.getBoundingClientRect();\n        return (bounding.top >= 0 &&\n            bounding.left >= 0 &&\n            bounding.right <= (window.innerWidth || document.documentElement.clientWidth) &&\n            bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight));\n    }\n    onBeforeOpen() {\n        this.scrollToActiveItem();\n        this.calciteComboboxBeforeOpen.emit();\n    }\n    onOpen() {\n        this.calciteComboboxOpen.emit();\n    }\n    onBeforeClose() {\n        this.calciteComboboxBeforeClose.emit();\n    }\n    onClose() {\n        this.calciteComboboxClose.emit();\n    }\n    ensureRecentSelectedItemIsActive() {\n        const { selectedItems } = this;\n        const targetIndex = selectedItems.length === 0 ? 0 : this.items.indexOf(selectedItems[selectedItems.length - 1]);\n        this.updateActiveItemIndex(targetIndex);\n    }\n    hideChip(chipEl) {\n        chipEl.classList.add(CSS.chipInvisible);\n    }\n    showChip(chipEl) {\n        chipEl.classList.remove(CSS.chipInvisible);\n    }\n    refreshChipDisplay({ chipEls, availableHorizontalChipElSpace, chipContainerElGap, }) {\n        chipEls.forEach((chipEl) => {\n            if (!chipEl.selected) {\n                this.hideChip(chipEl);\n            }\n            else {\n                const chipElWidth = getElementWidth(chipEl);\n                if (chipElWidth && chipElWidth < availableHorizontalChipElSpace) {\n                    availableHorizontalChipElSpace -= chipElWidth + chipContainerElGap;\n                    this.showChip(chipEl);\n                    return;\n                }\n            }\n            this.hideChip(chipEl);\n        });\n    }\n    setCompactSelectionDisplay({ chipContainerElGap, chipContainerElWidth, inputWidth, largestSelectedIndicatorChipWidth, }) {\n        const newCompactBreakpoint = Math.round(largestSelectedIndicatorChipWidth + chipContainerElGap + inputWidth);\n        if (!this.maxCompactBreakpoint || this.maxCompactBreakpoint < newCompactBreakpoint) {\n            this.maxCompactBreakpoint = newCompactBreakpoint;\n        }\n        this.compactSelectionDisplay = chipContainerElWidth < this.maxCompactBreakpoint;\n    }\n    setVisibleAndHiddenChips(chipEls) {\n        let newSelectedVisibleChipsCount = 0;\n        chipEls.forEach((chipEl) => {\n            if (chipEl.selected && !chipEl.classList.contains(CSS.chipInvisible)) {\n                newSelectedVisibleChipsCount++;\n            }\n        });\n        if (newSelectedVisibleChipsCount !== this.selectedVisibleChipsCount) {\n            this.selectedVisibleChipsCount = newSelectedVisibleChipsCount;\n        }\n        const newSelectedHiddenChipsCount = this.getSelectedItems().length - newSelectedVisibleChipsCount;\n        if (newSelectedHiddenChipsCount !== this.selectedHiddenChipsCount) {\n            this.selectedHiddenChipsCount = newSelectedHiddenChipsCount;\n        }\n    }\n    getMaxScrollerHeight() {\n        const items = this.getItemsAndGroups().filter((item) => !item.hidden);\n        const { maxItems } = this;\n        let itemsToProcess = 0;\n        let maxScrollerHeight = 0;\n        if (items.length > maxItems) {\n            items.forEach((item) => {\n                if (itemsToProcess < maxItems && maxItems > 0) {\n                    const height = this.calculateSingleItemHeight(item);\n                    if (height > 0) {\n                        maxScrollerHeight += height;\n                        itemsToProcess++;\n                    }\n                }\n            });\n        }\n        return maxScrollerHeight;\n    }\n    calculateSingleItemHeight(item) {\n        if (!item) {\n            return;\n        }\n        let height = item.offsetHeight;\n        // if item has children items, don't count their height twice\n        const children = Array.from(item.querySelectorAll(ComboboxChildSelector));\n        children\n            .map((child) => child?.offsetHeight)\n            .forEach((offsetHeight) => {\n            height -= offsetHeight;\n        });\n        return height;\n    }\n    getItemsAndGroups() {\n        return [...this.groupItems, ...this.items];\n    }\n    toggleSelection(item, value = !item.selected) {\n        if (!item ||\n            (this.selectionMode === \"single-persist\" && item.selected && item.value === this.value)) {\n            return;\n        }\n        if (this.isMulti()) {\n            item.selected = value;\n            this.updateAncestors(item);\n            this.selectedItems = this.getSelectedItems();\n            this.emitComboboxChange();\n            this.resetText();\n            this.filterItems(\"\");\n        }\n        else {\n            this.ignoreSelectedEventsFlag = true;\n            this.items.forEach((el) => (el.selected = el === item ? value : false));\n            this.ignoreSelectedEventsFlag = false;\n            this.selectedItems = this.getSelectedItems();\n            this.emitComboboxChange();\n            if (this.textInput) {\n                this.textInput.value = item.textLabel;\n            }\n            this.open = false;\n            this.updateActiveItemIndex(-1);\n            this.resetText();\n            this.filterItems(\"\");\n        }\n    }\n    updateAncestors(item) {\n        if (this.selectionMode !== \"ancestors\") {\n            return;\n        }\n        const ancestors = getItemAncestors(item);\n        const children = getItemChildren(item);\n        if (item.selected) {\n            ancestors.forEach((el) => {\n                el.selected = true;\n            });\n        }\n        else {\n            children.forEach((el) => (el.selected = false));\n            [...ancestors].forEach((el) => {\n                if (!hasActiveChildren(el)) {\n                    el.selected = false;\n                }\n            });\n        }\n    }\n    getFilteredItems() {\n        return this.filterText === \"\" ? this.items : this.items.filter((item) => !item.hidden);\n    }\n    getData() {\n        return this.items.map((item) => ({\n            filterDisabled: item.filterDisabled,\n            value: item.value,\n            label: item.textLabel,\n        }));\n    }\n    getNeedsIcon() {\n        return isSingleLike(this.selectionMode) && this.items.some((item) => item.icon);\n    }\n    resetText() {\n        if (this.textInput) {\n            this.textInput.value = \"\";\n        }\n        this.filterText = \"\";\n    }\n    getItems() {\n        const items = Array.from(this.el.querySelectorAll(ComboboxItem));\n        return items.filter((item) => !item.disabled);\n    }\n    getGroupItems() {\n        return Array.from(this.el.querySelectorAll(ComboboxItemGroup));\n    }\n    addCustomChip(value, focus) {\n        const existingItem = this.items.find((el) => el.textLabel === value);\n        if (existingItem) {\n            this.toggleSelection(existingItem, true);\n        }\n        else {\n            if (!this.isMulti()) {\n                this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);\n            }\n            const item = document.createElement(\"calcite-combobox-item\");\n            item.value = value;\n            item.textLabel = value;\n            item.selected = true;\n            this.el.appendChild(item);\n            this.resetText();\n            if (focus) {\n                this.setFocus();\n            }\n            this.updateItems();\n            this.filterItems(\"\");\n            this.open = true;\n            this.emitComboboxChange();\n        }\n    }\n    removeActiveChip() {\n        this.toggleSelection(this.selectedItems[this.activeChipIndex], false);\n        this.setFocus();\n    }\n    removeLastChip() {\n        this.toggleSelection(this.selectedItems[this.selectedItems.length - 1], false);\n        this.setFocus();\n    }\n    previousChip() {\n        const length = this.selectedItems.length - 1;\n        const active = this.activeChipIndex;\n        this.activeChipIndex = active === -1 ? length : Math.max(active - 1, 0);\n        this.updateActiveItemIndex(-1);\n        this.focusChip();\n    }\n    nextChip() {\n        const last = this.selectedItems.length - 1;\n        const newIndex = this.activeChipIndex + 1;\n        if (newIndex > last) {\n            this.activeChipIndex = -1;\n            this.setFocus();\n        }\n        else {\n            this.activeChipIndex = newIndex;\n            this.focusChip();\n        }\n        this.updateActiveItemIndex(-1);\n    }\n    focusChip() {\n        const guid = this.selectedItems[this.activeChipIndex]?.guid;\n        const chip = guid\n            ? this.referenceEl.querySelector(`#${chipUidPrefix}${guid}`)\n            : null;\n        chip?.setFocus();\n    }\n    shiftActiveItemIndex(delta) {\n        const { length } = this.filteredItems;\n        const newIndex = (this.activeItemIndex + length + delta) % length;\n        this.updateActiveItemIndex(newIndex);\n        this.scrollToActiveItem();\n    }\n    updateActiveItemIndex(index) {\n        this.activeItemIndex = index;\n        let activeDescendant = null;\n        this.filteredItems.forEach((el, i) => {\n            if (i === index) {\n                el.active = true;\n                activeDescendant = `${itemUidPrefix}${el.guid}`;\n            }\n            else {\n                el.active = false;\n            }\n        });\n        this.activeDescendant = activeDescendant;\n        if (this.activeItemIndex > -1) {\n            this.activeChipIndex = -1;\n        }\n    }\n    isAllSelected() {\n        return this.getItems().length === this.getSelectedItems().length;\n    }\n    isMulti() {\n        return !isSingleLike(this.selectionMode);\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Render Methods\n    //\n    //--------------------------------------------------------------------------\n    renderChips() {\n        const { activeChipIndex, readOnly, scale, selectionMode, messages } = this;\n        return this.selectedItems.map((item, i) => {\n            const chipClasses = {\n                chip: true,\n                \"chip--active\": activeChipIndex === i,\n            };\n            const ancestors = [...getItemAncestors(item)].reverse();\n            const pathLabel = [...ancestors, item].map((el) => el.textLabel);\n            const label = selectionMode !== \"ancestors\" ? item.textLabel : pathLabel.join(\" / \");\n            return (h(\"calcite-chip\", { appearance: readOnly ? \"outline\" : \"solid\", class: chipClasses, closable: !readOnly, \"data-test-id\": `chip-${i}`, icon: item.icon, iconFlipRtl: item.iconFlipRtl, id: item.guid ? `${chipUidPrefix}${item.guid}` : null, key: item.textLabel, messageOverrides: { dismissLabel: messages.removeTag }, onCalciteChipClose: () => this.calciteChipCloseHandler(item), onFocusin: () => (this.activeChipIndex = i), scale: scale, selected: item.selected, tabindex: activeChipIndex === i ? 0 : -1, title: label, value: item.value }, label));\n        });\n    }\n    renderAllSelectedIndicatorChip() {\n        const { compactSelectionDisplay, scale, selectedVisibleChipsCount, setAllSelectedIndicatorChipEl, } = this;\n        const label = this.messages.allSelected;\n        return (h(\"calcite-chip\", { class: {\n                chip: true,\n                [CSS.chipInvisible]: !(this.isAllSelected() &&\n                    !selectedVisibleChipsCount &&\n                    !compactSelectionDisplay),\n            }, ref: setAllSelectedIndicatorChipEl, scale: scale, title: label, value: \"\" }, label));\n    }\n    renderAllSelectedIndicatorChipCompact() {\n        const { compactSelectionDisplay, scale, selectedVisibleChipsCount } = this;\n        const label = this.messages.all || \"All\";\n        return (h(\"calcite-chip\", { class: {\n                chip: true,\n                [CSS.chipInvisible]: !(this.isAllSelected() &&\n                    !selectedVisibleChipsCount &&\n                    compactSelectionDisplay),\n            }, scale: scale, title: label, value: \"\" }, label));\n    }\n    renderSelectedIndicatorChip() {\n        const { compactSelectionDisplay, selectionDisplay, getSelectedItems, scale, selectedHiddenChipsCount, selectedVisibleChipsCount, setSelectedIndicatorChipEl, } = this;\n        let chipInvisible;\n        let label;\n        if (compactSelectionDisplay) {\n            chipInvisible = true;\n        }\n        else {\n            if (selectionDisplay === \"single\") {\n                const selectedItemsCount = getSelectedItems().length;\n                if (this.isAllSelected()) {\n                    chipInvisible = true;\n                }\n                else if (selectedItemsCount > 0) {\n                    chipInvisible = false;\n                }\n                else {\n                    chipInvisible = true;\n                }\n                label = `${selectedItemsCount} ${this.messages.selected}`;\n            }\n            else if (selectionDisplay === \"fit\") {\n                chipInvisible = !!((this.isAllSelected() && selectedVisibleChipsCount === 0) ||\n                    selectedHiddenChipsCount === 0);\n                label =\n                    selectedVisibleChipsCount > 0\n                        ? `+${selectedHiddenChipsCount}`\n                        : `${selectedHiddenChipsCount} ${this.messages.selected}`;\n            }\n        }\n        return (h(\"calcite-chip\", { class: {\n                chip: true,\n                [CSS.chipInvisible]: chipInvisible,\n            }, ref: setSelectedIndicatorChipEl, scale: scale, title: label, value: \"\" }, label));\n    }\n    renderSelectedIndicatorChipCompact() {\n        const { compactSelectionDisplay, selectionDisplay, getSelectedItems, scale, selectedHiddenChipsCount, } = this;\n        let chipInvisible;\n        let label;\n        if (compactSelectionDisplay) {\n            const selectedItemsCount = getSelectedItems().length;\n            if (this.isAllSelected()) {\n                chipInvisible = true;\n            }\n            else if (selectionDisplay === \"fit\") {\n                chipInvisible = !(selectedHiddenChipsCount > 0);\n                label = `${selectedHiddenChipsCount || 0}`;\n            }\n            else if (selectionDisplay === \"single\") {\n                chipInvisible = !(selectedItemsCount > 0);\n                label = `${selectedItemsCount}`;\n            }\n        }\n        else {\n            chipInvisible = true;\n        }\n        return (h(\"calcite-chip\", { class: {\n                chip: true,\n                [CSS.chipInvisible]: chipInvisible,\n            }, scale: scale, title: label, value: \"\" }, label));\n    }\n    get showingInlineIcon() {\n        const { placeholderIcon, selectionMode, selectedItems, open } = this;\n        const selectedItem = selectedItems[0];\n        const selectedIcon = selectedItem?.icon;\n        const singleSelectionMode = isSingleLike(selectionMode);\n        return !open && selectedItem\n            ? !!selectedIcon && singleSelectionMode\n            : !!placeholderIcon && (!selectedItem || singleSelectionMode);\n    }\n    renderInput() {\n        const { guid, disabled, placeholder, selectionMode, selectedItems, open } = this;\n        const single = isSingleLike(selectionMode);\n        const selectedItem = selectedItems[0];\n        const showLabel = !open && single && !!selectedItem;\n        return (h(\"span\", { class: {\n                \"input-wrap\": true,\n                \"input-wrap--single\": single,\n            } }, showLabel && (h(\"span\", { class: {\n                label: true,\n                \"label--icon\": !!selectedItem?.icon,\n            }, key: \"label\" }, selectedItem.textLabel)), h(\"input\", { \"aria-activedescendant\": this.activeDescendant, \"aria-autocomplete\": \"list\", \"aria-controls\": `${listboxUidPrefix}${guid}`, \"aria-expanded\": toAriaBoolean(open), \"aria-haspopup\": \"listbox\", \"aria-label\": getLabelText(this), \"aria-owns\": `${listboxUidPrefix}${guid}`, class: {\n                [CSS.input]: true,\n                \"input--single\": true,\n                \"input--hidden\": showLabel,\n                \"input--icon\": this.showingInlineIcon && !!this.placeholderIcon,\n            }, \"data-test-id\": \"input\", disabled: disabled, id: `${inputUidPrefix}${guid}`, key: \"input\", onFocus: this.comboboxFocusHandler, onInput: this.inputHandler, placeholder: placeholder, readOnly: this.readOnly, ref: (el) => (this.textInput = el), role: \"combobox\", tabindex: this.activeChipIndex === -1 ? 0 : -1, type: \"text\", value: this.filterText })));\n    }\n    renderListBoxOptions() {\n        return this.filteredItems.map((item) => (h(\"li\", { \"aria-selected\": toAriaBoolean(item.selected), id: item.guid ? `${itemUidPrefix}${item.guid}` : null, role: \"option\", tabindex: \"-1\" }, item.textLabel)));\n    }\n    renderFloatingUIContainer() {\n        const { setFloatingEl, setContainerEl, open } = this;\n        const classes = {\n            [CSS.listContainer]: true,\n            [FloatingCSS.animation]: true,\n            [FloatingCSS.animationActive]: open,\n        };\n        return (h(\"div\", { \"aria-hidden\": \"true\", class: {\n                \"floating-ui-container\": true,\n                \"floating-ui-container--active\": open,\n            }, ref: setFloatingEl }, h(\"div\", { class: classes, ref: setContainerEl }, h(\"ul\", { class: { list: true, \"list--hide\": !open } }, h(\"slot\", null)))));\n    }\n    renderSelectedOrPlaceholderIcon() {\n        const { selectedItems, placeholderIcon, placeholderIconFlipRtl } = this;\n        const selectedItem = selectedItems[0];\n        const selectedIcon = selectedItem?.icon;\n        return (this.showingInlineIcon && (h(\"span\", { class: \"icon-start\", key: \"selected-placeholder-icon\" }, h(\"calcite-icon\", { class: \"selected-icon\", flipRtl: this.open && selectedItem ? selectedItem.iconFlipRtl : placeholderIconFlipRtl, icon: !this.open && selectedItem ? selectedIcon : placeholderIcon, scale: getIconScale(this.scale) }))));\n    }\n    renderChevronIcon() {\n        const { open } = this;\n        return (h(\"span\", { class: \"icon-end\", key: \"chevron\" }, h(\"calcite-icon\", { class: CSS.icon, icon: open ? \"chevron-up\" : \"chevron-down\", scale: getIconScale(this.scale) })));\n    }\n    render() {\n        const { selectionDisplay, guid, label, open, readOnly } = this;\n        const singleSelectionMode = isSingleLike(this.selectionMode);\n        const allSelectionDisplay = selectionDisplay === \"all\";\n        const singleSelectionDisplay = selectionDisplay === \"single\";\n        const fitSelectionDisplay = !singleSelectionMode && selectionDisplay === \"fit\";\n        const isClearable = !this.clearDisabled && this.value?.length > 0;\n        return (h(Host, { key: '5739c3eb227fac2bcdf172f18cfa6c30f8e45534', onClick: this.comboboxFocusHandler }, h(InteractiveContainer, { key: '44b8d3b17184826dcc4777cc1c51bb36ade6c6bd', disabled: this.disabled }, h(\"div\", { key: 'd60f216956651cf01f03b99127a9c580458240cf', \"aria-live\": \"polite\", class: {\n                wrapper: true,\n                \"wrapper--single\": singleSelectionMode || !this.selectedItems.length,\n                \"wrapper--active\": open,\n            }, onClick: this.clickHandler, onKeyDown: this.keyDownHandler, ref: this.setReferenceEl }, this.renderSelectedOrPlaceholderIcon(), h(\"div\", { class: {\n                \"grid-input\": true,\n                [CSS.selectionDisplayFit]: fitSelectionDisplay,\n                [CSS.selectionDisplaySingle]: singleSelectionDisplay,\n            }, key: \"grid\", ref: this.setChipContainerEl }, !singleSelectionMode && !singleSelectionDisplay && this.renderChips(), !singleSelectionMode &&\n            !allSelectionDisplay && [\n            this.renderSelectedIndicatorChip(),\n            this.renderSelectedIndicatorChipCompact(),\n            this.renderAllSelectedIndicatorChip(),\n            this.renderAllSelectedIndicatorChipCompact(),\n        ], h(\"label\", { key: '0a225198d2f83bbabef5933e85bf4762cdd435d7', class: \"screen-readers-only\", htmlFor: `${inputUidPrefix}${guid}`, id: `${labelUidPrefix}${guid}` }, label), this.renderInput()), !readOnly && isClearable ? (h(XButton, { disabled: this.disabled, key: \"close-button\", label: this.messages.clear, scale: this.scale })) : null, !readOnly && this.renderChevronIcon()), h(\"ul\", { key: '09bd11c770c043dab5028a004fc8c457e1452dc8', \"aria-labelledby\": `${labelUidPrefix}${guid}`, \"aria-multiselectable\": \"true\", class: \"screen-readers-only\", id: `${listboxUidPrefix}${guid}`, role: \"listbox\", tabIndex: -1 }, this.renderListBoxOptions()), this.renderFloatingUIContainer(), h(HiddenFormInputSlot, { key: '157c1c6a024eeabea1692427da36e8c4f7fd45a9', component: this }), this.validationMessage && this.status === \"invalid\" ? (h(Validation, { icon: this.validationIcon, message: this.validationMessage, scale: this.scale, status: this.status })) : null)));\n    }\n    static get is() { return \"calcite-combobox\"; }\n    static get encapsulation() { return \"shadow\"; }\n    static get originalStyleUrls() {\n        return {\n            \"$\": [\"combobox.scss\"]\n        };\n    }\n    static get styleUrls() {\n        return {\n            \"$\": [\"combobox.css\"]\n        };\n    }\n    static get assetsDirs() { return [\"assets\"]; }\n    static get properties() {\n        return {\n            \"clearDisabled\": {\n                \"type\": \"boolean\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, the value-clearing will be disabled.\"\n                },\n                \"attribute\": \"clear-disabled\",\n                \"reflect\": true,\n                \"defaultValue\": \"false\"\n            },\n            \"filterText\": {\n                \"type\": \"string\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Text for the component's filter input field.\"\n                },\n                \"attribute\": \"filter-text\",\n                \"reflect\": true,\n                \"defaultValue\": \"\\\"\\\"\"\n            },\n            \"selectionDisplay\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"SelectionDisplay\",\n                    \"resolved\": \"\\\"all\\\" | \\\"fit\\\" | \\\"single\\\"\",\n                    \"references\": {\n                        \"SelectionDisplay\": {\n                            \"location\": \"import\",\n                            \"path\": \"./interfaces\",\n                            \"id\": \"src/components/combobox/interfaces.ts::SelectionDisplay\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `selectionMode` is `\\\"ancestors\\\"` or `\\\"multiple\\\"`, specifies the display of multiple `calcite-combobox-item` selections, where:\\n\\n`\\\"all\\\"` displays all selections with individual `calcite-chip`s,\\n\\n`\\\"fit\\\"` displays individual `calcite-chip`s that scale to the component's size, including a non-closable `calcite-chip`, which provides the number of additional `calcite-combobox-item` selections not visually displayed, and\\n\\n`\\\"single\\\"` displays one `calcite-chip` with the total number of selections.\"\n                },\n                \"attribute\": \"selection-display\",\n                \"reflect\": true,\n                \"defaultValue\": \"\\\"all\\\"\"\n            },\n            \"open\": {\n                \"type\": \"boolean\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, displays and positions the component.\"\n                },\n                \"attribute\": \"open\",\n                \"reflect\": true,\n                \"defaultValue\": \"false\"\n            },\n            \"disabled\": {\n                \"type\": \"boolean\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, interaction is prevented and the component is displayed with lower opacity.\"\n                },\n                \"attribute\": \"disabled\",\n                \"reflect\": true,\n                \"defaultValue\": \"false\"\n            },\n            \"form\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"The `id` of the form that will be associated with the component.\\n\\nWhen not set, the component will be associated with its ancestor form element, if any.\"\n                },\n                \"attribute\": \"form\",\n                \"reflect\": true\n            },\n            \"label\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": true,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Accessible name for the component.\"\n                },\n                \"attribute\": \"label\",\n                \"reflect\": false\n            },\n            \"placeholder\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the placeholder text for the input.\"\n                },\n                \"attribute\": \"placeholder\",\n                \"reflect\": false\n            },\n            \"placeholderIcon\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the placeholder icon for the input.\"\n                },\n                \"attribute\": \"placeholder-icon\",\n                \"reflect\": true\n            },\n            \"placeholderIconFlipRtl\": {\n                \"type\": \"boolean\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, the icon will be flipped when the element direction is right-to-left (`\\\"rtl\\\"`).\"\n                },\n                \"attribute\": \"placeholder-icon-flip-rtl\",\n                \"reflect\": true,\n                \"defaultValue\": \"false\"\n            },\n            \"maxItems\": {\n                \"type\": \"number\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"number\",\n                    \"resolved\": \"number\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the maximum number of `calcite-combobox-item`s (including nested children) to display before displaying a scrollbar.\"\n                },\n                \"attribute\": \"max-items\",\n                \"reflect\": true,\n                \"defaultValue\": \"0\"\n            },\n            \"validationMessage\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the validation message to display under the component.\"\n                },\n                \"attribute\": \"validation-message\",\n                \"reflect\": false\n            },\n            \"validationIcon\": {\n                \"type\": \"any\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string | boolean\",\n                    \"resolved\": \"boolean | string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the validation icon to display under the component.\"\n                },\n                \"attribute\": \"validation-icon\",\n                \"reflect\": true\n            },\n            \"validity\": {\n                \"type\": \"unknown\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"MutableValidityState\",\n                    \"resolved\": \"{ valid: boolean; badInput: boolean; customError: boolean; patternMismatch: boolean; rangeOverflow: boolean; rangeUnderflow: boolean; stepMismatch: boolean; tooLong: boolean; tooShort: boolean; typeMismatch: boolean; valueMissing: boolean; }\",\n                    \"references\": {\n                        \"MutableValidityState\": {\n                            \"location\": \"import\",\n                            \"path\": \"../../utils/form\",\n                            \"id\": \"src/utils/form.tsx::MutableValidityState\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [{\n                            \"name\": \"readonly\",\n                            \"text\": undefined\n                        }, {\n                            \"name\": \"mdn\",\n                            \"text\": \"[ValidityState](https://developer.mozilla.org/en-US/docs/Web/API/ValidityState)\"\n                        }],\n                    \"text\": \"The current validation state of the component.\"\n                },\n                \"defaultValue\": \"{\\n    valid: false,\\n    badInput: false,\\n    customError: false,\\n    patternMismatch: false,\\n    rangeOverflow: false,\\n    rangeUnderflow: false,\\n    stepMismatch: false,\\n    tooLong: false,\\n    tooShort: false,\\n    typeMismatch: false,\\n    valueMissing: false,\\n  }\"\n            },\n            \"name\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"string\",\n                    \"resolved\": \"string\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the name of the component.\\n\\nRequired to pass the component's `value` on form submission.\"\n                },\n                \"attribute\": \"name\",\n                \"reflect\": true\n            },\n            \"allowCustomValues\": {\n                \"type\": \"boolean\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, allows entry of custom values, which are not in the original set of items.\"\n                },\n                \"attribute\": \"allow-custom-values\",\n                \"reflect\": true\n            },\n            \"overlayPositioning\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"OverlayPositioning\",\n                    \"resolved\": \"\\\"absolute\\\" | \\\"fixed\\\"\",\n                    \"references\": {\n                        \"OverlayPositioning\": {\n                            \"location\": \"import\",\n                            \"path\": \"../../utils/floating-ui\",\n                            \"id\": \"src/utils/floating-ui.ts::OverlayPositioning\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Determines the type of positioning to use for the overlaid content.\\n\\nUsing `\\\"absolute\\\"` will work for most cases. The component will be positioned inside of overflowing parent containers and will affect the container's layout.\\n\\n`\\\"fixed\\\"` should be used to escape an overflowing parent container, or when the reference element's `position` CSS property is `\\\"fixed\\\"`.\"\n                },\n                \"attribute\": \"overlay-positioning\",\n                \"reflect\": true,\n                \"defaultValue\": \"\\\"absolute\\\"\"\n            },\n            \"required\": {\n                \"type\": \"boolean\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, the component must have a value in order for the form to submit.\"\n                },\n                \"attribute\": \"required\",\n                \"reflect\": true,\n                \"defaultValue\": \"false\"\n            },\n            \"selectionMode\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"Extract<\\n    \\\"single\\\" | \\\"single-persist\\\" | \\\"ancestors\\\" | \\\"multiple\\\",\\n    SelectionMode\\n  >\",\n                    \"resolved\": \"\\\"ancestors\\\" | \\\"multiple\\\" | \\\"single\\\" | \\\"single-persist\\\"\",\n                    \"references\": {\n                        \"Extract\": {\n                            \"location\": \"global\",\n                            \"id\": \"global::Extract\"\n                        },\n                        \"SelectionMode\": {\n                            \"location\": \"import\",\n                            \"path\": \"../interfaces\",\n                            \"id\": \"src/components/interfaces.ts::SelectionMode\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the selection mode of the component, where:\\n\\n`\\\"multiple\\\"` allows any number of selections,\\n\\n`\\\"single\\\"` allows only one selection,\\n\\n`\\\"single-persist\\\"` allows one selection and prevents de-selection, and\\n\\n`\\\"ancestors\\\"` allows multiple selections, but shows ancestors of selected items as selected, with only deepest children shown in chips.\"\n                },\n                \"attribute\": \"selection-mode\",\n                \"reflect\": true,\n                \"defaultValue\": \"\\\"multiple\\\"\"\n            },\n            \"scale\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"Scale\",\n                    \"resolved\": \"\\\"l\\\" | \\\"m\\\" | \\\"s\\\"\",\n                    \"references\": {\n                        \"Scale\": {\n                            \"location\": \"import\",\n                            \"path\": \"../interfaces\",\n                            \"id\": \"src/components/interfaces.ts::Scale\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the size of the component.\"\n                },\n                \"attribute\": \"scale\",\n                \"reflect\": true,\n                \"defaultValue\": \"\\\"m\\\"\"\n            },\n            \"status\": {\n                \"type\": \"string\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"Status\",\n                    \"resolved\": \"\\\"idle\\\" | \\\"invalid\\\" | \\\"valid\\\"\",\n                    \"references\": {\n                        \"Status\": {\n                            \"location\": \"import\",\n                            \"path\": \"../interfaces\",\n                            \"id\": \"src/components/interfaces.ts::Status\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Specifies the status of the input field, which determines message and icons.\"\n                },\n                \"attribute\": \"status\",\n                \"reflect\": true,\n                \"defaultValue\": \"\\\"idle\\\"\"\n            },\n            \"value\": {\n                \"type\": \"string\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"string | string[]\",\n                    \"resolved\": \"string | string[]\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"The component's value(s) from the selected `calcite-combobox-item`(s).\"\n                },\n                \"attribute\": \"value\",\n                \"reflect\": false,\n                \"defaultValue\": \"null\"\n            },\n            \"flipPlacements\": {\n                \"type\": \"unknown\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"FlipPlacement[]\",\n                    \"resolved\": \"FlipPlacement[]\",\n                    \"references\": {\n                        \"FlipPlacement\": {\n                            \"location\": \"import\",\n                            \"path\": \"../../utils/floating-ui\",\n                            \"id\": \"src/utils/floating-ui.ts::FlipPlacement\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Defines the available placements that can be used when a flip occurs.\"\n                }\n            },\n            \"messages\": {\n                \"type\": \"unknown\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"ComboboxMessages\",\n                    \"resolved\": \"{ all: string; allSelected: string; clear: string; removeTag: string; selected: string; }\",\n                    \"references\": {\n                        \"ComboboxMessages\": {\n                            \"location\": \"import\",\n                            \"path\": \"./assets/combobox/t9n\",\n                            \"id\": \"src/components/combobox/assets/combobox/t9n/index.d.ts::ComboboxMessages\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [{\n                            \"name\": \"internal\",\n                            \"text\": undefined\n                        }],\n                    \"text\": \"Made into a prop for testing purposes only\"\n                }\n            },\n            \"messageOverrides\": {\n                \"type\": \"unknown\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"Partial<ComboboxMessages>\",\n                    \"resolved\": \"{ all?: string; allSelected?: string; clear?: string; removeTag?: string; selected?: string; }\",\n                    \"references\": {\n                        \"Partial\": {\n                            \"location\": \"global\",\n                            \"id\": \"global::Partial\"\n                        },\n                        \"ComboboxMessages\": {\n                            \"location\": \"import\",\n                            \"path\": \"./assets/combobox/t9n\",\n                            \"id\": \"src/components/combobox/assets/combobox/t9n/index.d.ts::ComboboxMessages\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Use this property to override individual strings used by the component.\"\n                }\n            },\n            \"selectedItems\": {\n                \"type\": \"unknown\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"HTMLCalciteComboboxItemElement[]\",\n                    \"resolved\": \"HTMLCalciteComboboxItemElement[]\",\n                    \"references\": {\n                        \"HTMLCalciteComboboxItemElement\": {\n                            \"location\": \"global\",\n                            \"id\": \"global::HTMLCalciteComboboxItemElement\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [{\n                            \"name\": \"readonly\",\n                            \"text\": undefined\n                        }],\n                    \"text\": \"Specifies the component's selected items.\"\n                },\n                \"defaultValue\": \"[]\"\n            },\n            \"filteredItems\": {\n                \"type\": \"unknown\",\n                \"mutable\": true,\n                \"complexType\": {\n                    \"original\": \"HTMLCalciteComboboxItemElement[]\",\n                    \"resolved\": \"HTMLCalciteComboboxItemElement[]\",\n                    \"references\": {\n                        \"HTMLCalciteComboboxItemElement\": {\n                            \"location\": \"global\",\n                            \"id\": \"global::HTMLCalciteComboboxItemElement\"\n                        }\n                    }\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [{\n                            \"name\": \"readonly\",\n                            \"text\": undefined\n                        }],\n                    \"text\": \"Specifies the component's filtered items.\"\n                },\n                \"defaultValue\": \"[]\"\n            },\n            \"readOnly\": {\n                \"type\": \"boolean\",\n                \"mutable\": false,\n                \"complexType\": {\n                    \"original\": \"boolean\",\n                    \"resolved\": \"boolean\",\n                    \"references\": {}\n                },\n                \"required\": false,\n                \"optional\": false,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"When `true`, the component's value can be read, but controls are not accessible and the value cannot be modified.\"\n                },\n                \"attribute\": \"read-only\",\n                \"reflect\": true,\n                \"defaultValue\": \"false\"\n            }\n        };\n    }\n    static get states() {\n        return {\n            \"items\": {},\n            \"groupItems\": {},\n            \"needsIcon\": {},\n            \"activeItemIndex\": {},\n            \"activeChipIndex\": {},\n            \"activeDescendant\": {},\n            \"compactSelectionDisplay\": {},\n            \"selectedHiddenChipsCount\": {},\n            \"selectedVisibleChipsCount\": {},\n            \"effectiveLocale\": {},\n            \"defaultMessages\": {}\n        };\n    }\n    static get events() {\n        return [{\n                \"method\": \"calciteComboboxChange\",\n                \"name\": \"calciteComboboxChange\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when the selected item(s) changes.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }, {\n                \"method\": \"calciteComboboxFilterChange\",\n                \"name\": \"calciteComboboxFilterChange\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when text is added to filter the options list.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }, {\n                \"method\": \"calciteComboboxChipClose\",\n                \"name\": \"calciteComboboxChipClose\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when a selected item in the component is closed via its `calcite-chip`.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }, {\n                \"method\": \"calciteComboboxBeforeClose\",\n                \"name\": \"calciteComboboxBeforeClose\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when the component is requested to be closed, and before the closing transition begins.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }, {\n                \"method\": \"calciteComboboxClose\",\n                \"name\": \"calciteComboboxClose\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when the component is closed and animation is complete.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }, {\n                \"method\": \"calciteComboboxBeforeOpen\",\n                \"name\": \"calciteComboboxBeforeOpen\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when the component is added to the DOM but not rendered, and before the opening transition begins.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }, {\n                \"method\": \"calciteComboboxOpen\",\n                \"name\": \"calciteComboboxOpen\",\n                \"bubbles\": true,\n                \"cancelable\": false,\n                \"composed\": true,\n                \"docs\": {\n                    \"tags\": [],\n                    \"text\": \"Fires when the component is open and animation is complete.\"\n                },\n                \"complexType\": {\n                    \"original\": \"void\",\n                    \"resolved\": \"void\",\n                    \"references\": {}\n                }\n            }];\n    }\n    static get methods() {\n        return {\n            \"reposition\": {\n                \"complexType\": {\n                    \"signature\": \"(delayed?: boolean) => Promise<void>\",\n                    \"parameters\": [{\n                            \"name\": \"delayed\",\n                            \"type\": \"boolean\",\n                            \"docs\": \"Reposition the component after a delay\"\n                        }],\n                    \"references\": {\n                        \"Promise\": {\n                            \"location\": \"global\",\n                            \"id\": \"global::Promise\"\n                        }\n                    },\n                    \"return\": \"Promise<void>\"\n                },\n                \"docs\": {\n                    \"text\": \"Updates the position of the component.\",\n                    \"tags\": [{\n                            \"name\": \"param\",\n                            \"text\": \"delayed Reposition the component after a delay\"\n                        }, {\n                            \"name\": \"returns\",\n                            \"text\": \"Promise\"\n                        }]\n                }\n            },\n            \"setFocus\": {\n                \"complexType\": {\n                    \"signature\": \"() => Promise<void>\",\n                    \"parameters\": [],\n                    \"references\": {\n                        \"Promise\": {\n                            \"location\": \"global\",\n                            \"id\": \"global::Promise\"\n                        }\n                    },\n                    \"return\": \"Promise<void>\"\n                },\n                \"docs\": {\n                    \"text\": \"Sets focus on the component.\",\n                    \"tags\": []\n                }\n            }\n        };\n    }\n    static get elementRef() { return \"el\"; }\n    static get watchers() {\n        return [{\n                \"propName\": \"filterText\",\n                \"methodName\": \"filterTextChange\"\n            }, {\n                \"propName\": \"open\",\n                \"methodName\": \"openHandler\"\n            }, {\n                \"propName\": \"disabled\",\n                \"methodName\": \"handleDisabledChange\"\n            }, {\n                \"propName\": \"maxItems\",\n                \"methodName\": \"maxItemsHandler\"\n            }, {\n                \"propName\": \"overlayPositioning\",\n                \"methodName\": \"overlayPositioningHandler\"\n            }, {\n                \"propName\": \"selectionMode\",\n                \"methodName\": \"handlePropsChange\"\n            }, {\n                \"propName\": \"scale\",\n                \"methodName\": \"handlePropsChange\"\n            }, {\n                \"propName\": \"value\",\n                \"methodName\": \"valueHandler\"\n            }, {\n                \"propName\": \"messageOverrides\",\n                \"methodName\": \"onMessagesChange\"\n            }, {\n                \"propName\": \"flipPlacements\",\n                \"methodName\": \"flipPlacementsHandler\"\n            }, {\n                \"propName\": \"selectedItems\",\n                \"methodName\": \"selectedItemsHandler\"\n            }, {\n                \"propName\": \"effectiveLocale\",\n                \"methodName\": \"effectiveLocaleChange\"\n            }];\n    }\n    static get listeners() {\n        return [{\n                \"name\": \"click\",\n                \"method\": \"documentClickHandler\",\n                \"target\": \"document\",\n                \"capture\": false,\n                \"passive\": false\n            }, {\n                \"name\": \"calciteComboboxItemChange\",\n                \"method\": \"calciteComboboxItemChangeHandler\",\n                \"target\": undefined,\n                \"capture\": false,\n                \"passive\": false\n            }];\n    }\n}\n//# sourceMappingURL=combobox.js.map\n"],"mappings":"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"}